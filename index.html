<!doctype html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>أحمد السلامي — Portfolio</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap">
<style>
:root{color-scheme:dark;--bg:#0f172a;--card:#1e293b;--text:#e2e8f0;--accent:#06b6d4}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);margin:0;padding:0;line-height:1.6;direction:rtl}
.container{max-width:800px;margin:auto;padding:15px}
.card{background:var(--card);padding:15px;border-radius:16px;margin-bottom:20px}
h3{color:var(--accent);margin-top:0}
.works{display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));gap:10px}
.work-item{background:#0f172a;border-radius:12px;overflow:hidden;border:1px solid #334155;transition:.3s;cursor:pointer}
.work-item:hover{transform:scale(1.03)}
.work-item img{width:100%;height:100px;object-fit:cover}
.lightbox{display:none;position:fixed;z-index:999;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);justify-content:center;align-items:center}
.lightbox.show{display:flex}
.lightbox img{max-width:90%;max-height:90%;border-radius:12px}
.footer{text-align:center;margin:30px 0;color:#94a3b8;font-size:14px}
</style>
</head>
<body>
<div class="container">
  <div class="card" style="text-align:center">
    <h2>أحمد محمد السلامي</h2>
    <p>مصمم ومسوق إلكتروني — عرض أعمالي وشهاداتي</p>
  </div>
  <div id="dynamic-sections"></div>
  <div class="footer">© 2025 أحمد السلامي</div>
</div>
<div class="lightbox" id="lightbox">
  <button class="prev">&#10094;</button>
  <img src="" alt="صورة مكبرة">
  <button class="next">&#10095;</button>
</div>
<script>
(function(){
const STORE_KEY='als_portfolio_v1';const DATA_URL='data.json?v='+Date.now();
const pretty={designs:'أعمال التصميم الإعلاني',campaigns:'أداء الحملات الإعلانية',certs:'الدورات والشهادات'};
function readLocal(){try{const raw=localStorage.getItem(STORE_KEY);if(!raw)return null;
const d=JSON.parse(raw);if(d.sections)return d;return{sections:{designs:d.designs||[],campaigns:d.campaigns||[],certs:d.certs||[]}};}catch(e){return null;}}
function makeSectionCard(title){const card=document.createElement('div');card.className='card';
const h3=document.createElement('h3');h3.textContent=title;
const grid=document.createElement('div');grid.className='works';
card.appendChild(h3);card.appendChild(grid);return{card,grid};}
function addItemsToGrid(items,grid,linkable=false){items.forEach((it,i)=>{const wrap=document.createElement('div');wrap.className='work-item';
const img=document.createElement('img');img.src=it.img;img.alt=it.caption||('عنصر '+(i+1));
if(linkable&&it.link){const a=document.createElement('a');a.href=it.link;a.target='_blank';a.appendChild(img);wrap.appendChild(a);}else{wrap.appendChild(img);}grid.appendChild(wrap);});}
function initLightbox(){const lightbox=document.getElementById('lightbox');const imgs=Array.from(document.querySelectorAll('.work-item img')).filter(img=>!(img.parentElement&&img.parentElement.tagName.toLowerCase()==='a'));
const lightboxImg=lightbox.querySelector('img');let idx=0;imgs.forEach((img,i)=>img.addEventListener('click',()=>{idx=i;lightboxImg.src=imgs[idx].src;lightbox.classList.add('show');}));
lightbox.querySelector('.next').onclick=e=>{e.stopPropagation();idx=(idx+1)%imgs.length;lightboxImg.src=imgs[idx].src;};
lightbox.querySelector('.prev').onclick=e=>{e.stopPropagation();idx=(idx-1+imgs.length)%imgs.length;lightboxImg.src=imgs[idx].src;};
lightbox.onclick=()=>lightbox.classList.remove('show');}
async function load(){const mount=document.getElementById('dynamic-sections');let data=null;
try{const res=await fetch(DATA_URL,{cache:'no-store'});if(res.ok){data=await res.json();if(!data.sections)throw Error();}}catch(_){}
if(!data)data=readLocal();if(!data||!data.sections)return;
Object.entries(data.sections).forEach(([key,items])=>{if(!items||!items.length)return;
const title=pretty[key]||key.replace(/_/g,' ');const{card,grid}=makeSectionCard(title);
addItemsToGrid(items,grid,key==='certs');mount.appendChild(card);});initLightbox();}
load();})();
</script>
</body></html>